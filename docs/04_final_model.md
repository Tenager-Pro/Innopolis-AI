# Документация: Финальная модель со статистическими тестами и анализом бизнес-влияния

## Обзор
Финальный этап разработки модели предсказания оттока клиентов, включающий статистическую валидацию, сравнение моделей, анализ бизнес-воздействия и подготовку к промышленному внедрению.

## Назначение
Комплексная оценка и выбор оптимальной модели для предсказания оттока клиентов с учетом:
1. Статистической значимости результатов
2. Бизнес-метрик и финансового воздействия
3. Готовности к промышленному развертыванию
4. Воспроизводимости и надежности

## Действия

1. Bootstrap-анализ
    Назначение: Оценка доверительных интервалов для метрик

    Рассчитываемые интервалы:
        95% доверительный интервал для AUC
        95% доверительный интервал для Accuracy
        95% доверительный интервал для F1-Score

2. Тест Макнемара
    Назначение: Сравнение парных классификаторов
    Интерпретация:
        p-value < 0.05: статистически значимое различие
        p-value ≥ 0.05: различия незначимы

3. Тест ДеЛонга
    Назначение: Сравнение AUC двух моделей
    Методология:
        Основан на сравнении ROC-кривых
        Учитывает корреляцию между предсказаниями
        Более точный, чем сравнение доверительных интервалов

4. Визуализация результатов
    Генерируемые графики
        1. ROC-кривые
            Сравнение кривых для всех моделей
            Отображение AUC для каждой модели
            Опорная линия случайного классификатора

        2. Precision-Recall кривые
            Компромисс между точностью и полнотой
            Показатель Average Precision
            Особенно важен для несбалансированных данных

        3. Калибровочные кривые
            Сравнение калиброванности вероятностей
            Идеальная калибровка (диагональ)
            Важно для вероятностных интерпретаций

        4. Распределения бутстрап-оценок
            Гистограммы распределений метрик
            Сравнение стабильности моделей
            Визуализация доверительных интервалов

        5. Сравнение метрик
            Столбчатые диаграммы всех метрик
            Сравнение производительности моделей
            Комплексный обзор качества

        6. Результаты статистических тестов
            Визуализация p-values
            Порог значимости (α = 0.05)
            Логарифмическая шкала

5. Расчет бизнес-метрик
    1. Матрица ошибок и её стоимость
        True Positives (TP): Верно предсказанные уходящие клиенты
        False Positives (FP): Клиенты, которых ошибочно посчитали уходящими
        False Negatives (FN): Пропущенные уходящие клиенты
        True Negatives (TN): Верно предсказанные лояльные клиенты
    
    2. Финансовые расчеты
        Стоимость ложных отрицаний (пропущенные уходы)
        Стоимость ложных положиний (ненужные удержания)
        Ценность истинных положиний (успешные удержания)
        Общая чистая ценность

    3. Ключевые бизнес-показатели
        Total Net Value: Общая чистая ценность модели
        Value Per Customer: Ценность на одного клиента
        Retention ROI: Возврат инвестиций в удержание

6. Выбор финальной модели
    Критерии выбора:
        AUC-ROC: Основная метрика для несбалансированных данных
        Статистическая значимость: Результаты тестов Макнемара и ДеЛонга
        Бизнес-влияние: Финансовый вклад модели
        Стабильность: Узкие доверительные интервалы
        Интерпретируемость: Возможность объяснения предсказаний
